<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>滴滴实习那些天——sql语言那些事 | bri11ake</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://bri11ake.github.io/favicon.ico?v=1620634990554">
<link rel="stylesheet" href="https://bri11ake.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="​
在滴滴实习期间用了很多次sql语言，痛苦的学习过程也让我成长。稍微整理了一下sql语言的知识点。编程语言长期不用也会生疏和遗忘，希望自己将来会再用到的时候能够通过之前的整理快速重启。
数据和表
CREATE DATABASE：创建数据库..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://bri11ake.github.io">
        <img src="https://bri11ake.github.io/images/avatar.png?v=1620634990554" class="site-logo">
        <h1 class="site-title">bri11ake</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            时间轴
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            阅前须知
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      永远年轻 永远热泪盈眶
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://bri11ake.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">滴滴实习那些天——sql语言那些事</h2>
            <div class="post-date">2020-12-13</div>
            
            <div class="post-content" v-pre>
              <p>​</p>
<p>在滴滴实习期间用了很多次sql语言，痛苦的学习过程也让我成长。稍微整理了一下sql语言的知识点。编程语言长期不用也会生疏和遗忘，希望自己将来会再用到的时候能够通过之前的整理快速重启。</p>
<h2 id="数据和表"><strong>数据和表</strong></h2>
<p>CREATE DATABASE：创建数据库，数据库是SQL操作的基础</p>
<p>SHOW DATABASES：查看数据库</p>
<p>USE DATABASE:进入数据库，以数据库为管理单位</p>
<p>CREATE TABLE：创建数据表，需要知道COLUMN NAMES和DATA TYPES</p>
<p>NULL与NOT NULL：NULL是未定义的值，需要提前清楚哪些列不能接受NULL值，在创建数据表时即设置为NOT NULL</p>
<p>DEFAULT：指定列的默认值，若不对该列赋值，则该列自动录入默认值，需要在创建数据表时即设置</p>
<p>DESC：查看表的结构</p>
<p>INSERT：配合VALUE 使用插入数据，插入数据时数据值的顺序必须与列名的顺序完全一致，三种语句形式分别为改变列顺序、省略列名、省略部分列（省略部分默认为NULL）</p>
<p>DROP TABLE：删除数据表，最好是在没有使用INSERT插入数据前使用</p>
<h2 id="select语句"><strong>SELECT语句</strong></h2>
<p>SELECT (*或列名) FROM (表明）WHERE(特殊条件)：根据特殊条件从数据表中选择需要的数据，其中特殊条件有很多种类型</p>
<p>LIKE+通配符：查找部分文本字符串返回所有符合匹配条件的行，其中%匹配多个，_匹配一个</p>
<p>BETWEEN () AND ()：取范围内的值</p>
<p>IN(‘ ‘,…)：取括号内的值，反过来可以用NOT IN</p>
<p>注意</p>
<p>文本类的数据类型需要单引号，数字类的不需要，并且不能使用双引号，包含单引号的数据要用\或‘进行处理</p>
<p>使用AND或OR进行结合查询，使用比较运算符进行选择要用IS NULL来找到NULL</p>
<h2 id="delete和update"><strong>DELETE和UPDATE</strong></h2>
<p>DELETE FROM (数据表) WHERE (特殊条件)：将符合WHERE条件的记录从数据表中删除，可以删除单行或多行，不可以删除列</p>
<p>UPDATE (数据表) SET (要改变的记录) WHERE (特殊条件)：不删除内容，把旧记录回收并替换为新记录，可以同时替换多行，并且可以和基础的数学运算符一起使用</p>
<h2 id="聪明的表设计"><strong>聪明的表设计</strong></h2>
<p>SHOW CREATE TABLE (数据表)：呈现创建现有表的正确语法</p>
<p>PRIMARY KEY (主键名)：设置某一列为主键</p>
<p>AUTO_INCREMENT：每次执行INSERT命令插入数据时，它会自动给列赋予唯一的递增整数值，并且忽视NULL</p>
<p>注意</p>
<p>数据原子性列中的数据已经拆解为查询所需的最小单位</p>
<p>规则一：在同一列中不存储多个类型相同的数据   规则二：不会用多个列来存储类型相同的数据</p>
<p>每个数据行均需包含原子性数据，而且每一个数据行均需具有唯一的识别方法</p>
<h2 id="alter"><strong>ALTER</strong></h2>
<p>ALTER TABLE (表名)：声明要改变的数据表</p>
<p>ADD COLUMN (列名) (定义) (关键字)：向数据表中添加新的列,关键字包括FIRST、AFTER、BEFORE、LAST、SECOND…设定新增列的位置</p>
<p>CHANGE COLUMN (原列名) (新列名) …（必须加上数据类型）：可同时改变现有列的名称和数据类型</p>
<p>MODIFY COLUMN (列名) …：修改现有列的数据类型或位置</p>
<p>DROP COLUMN (列名)：从表中删除列</p>
<p>RENAME TO (新表名)：修改现有表的名称</p>
<p>RIGHT(列名，指定数量的字符)、LEFT()：从列左右两边开始数选出指定数量的字符</p>
<p>SUBSTRING_INDEX(列名，指定字符或字符串，指定字符或字符串出现的顺序（如1、2）)：找出列中指定字符或字符串前的所有内容，这些操作不会改变存储在表中的内容</p>
<p>UPDATE (表名) SET (特殊条件)：为表中的每一行都填上相同的新值</p>
<p>注意</p>
<p>ALTER用于修改表结构，UPDATE用于修改表数据</p>
<h2 id="select进阶">SELECT进阶</h2>
<p>SQL语句</p>
<p>UPDATE (表名) SET (列名) = CASE WHEN (特殊条件) (ELSE) END：使用CASE表达式来UPDATE</p>
<p>ORDER BY (列名) (列名) (DESC)：可以根据多个列进行以此排序，可以用DESC反转，列内排序顺序优先级：部分符号（！”#￥%&amp;‘()*+,-./）——数字——部分符号（:;&lt;=&gt;?@）——大写字母——部分符号（[]^_`）——小写字母——部分符号（{|}~）</p>
<p>SELECT SUM(列名)、AVG(列名)、MIN/MAX(列名)、COUNT(列名)：SUM()为函数，可对数据值执行操作</p>
<p>GROUP BY (列名)：根据列中相同部分进行分组</p>
<p>SELECT DISTINCT (列名)：DISTINCT是关键字，不用加括号，不取重复值</p>
<p>LIMIT (列数),(列数)：限制呈现的列数，可以取指定的范围</p>
<p>WHERE … HAVING …：在 SQL 中增加 HAVING 子句原因是，WHERE 关键字无法与聚合函数一起使用。HAVING 子句可以让我们筛选分组后的各组数据。</p>
<p>注意</p>
<p>两个UPDATE语句可能修改了相同列的值，要注意顺序</p>
<h2 id="多张表的数据库设计">多张表的数据库设计</h2>
<p>数据变得越来越复杂，我们需要从使用一张数据表升级到到多张数据表的数据库</p>
<p>对数据库内的数据描述（列和表），以及任何相关对象和各种连接方式的描述就成为SCHEMA模式</p>
<p>外键能用于确认一张表中的行与另一张表中的行相对应，外键的值可以是NULL，但必须已经存在于父表的来源列，通常没有唯一性</p>
<p>数据模式：一对一、一对多、多对多，一对一的数据通常留在主表，数据模式的区分主要是用于主表的数据和数据来源的数量比</p>
<p>多对多的相关表通常用一个中间桥梁来存储两个相关表的主键，即junction table（连接表）</p>
<p>由两列以上组成的键称为组合键，是自然键的一种</p>
<p>依赖</p>
<p>函数依赖：某列的数据必须随着另一列的数据的改变而改变</p>
<p>部分函数依赖：非主键的列依赖于组合主键的某个部分（但不是完全依赖于组合主键）</p>
<p>传递依赖：如果改变任何非键列可能造成其他列的改变</p>
<p>传递函数依赖：任何非键列与另一个非键列有关联</p>
<p>第一范式</p>
<p>规则一：数据列只包含具有原子性的值           规则二：没有重复的数据组</p>
<p>第二范式</p>
<p>规则一：先符合第一范式       规则二：没有部分函数依赖性</p>
<p>第三范式</p>
<p>规则一：符合第二范式       规则二：没有传递函数依赖性</p>
<h2 id="联接与多张表的操作">联接与多张表的操作</h2>
<p>混乱状态与多张表一起出现，需要别名来让表更简单清楚。联接则有助于联系表，取得分布在各张表里的内容</p>
<p>SUBSTR((列名),LENGTH(列名)+2(逗号+空格的长度))：SUBSTR返回本列内原始字符串的一部分，他接受字符串并切除我们用括号指定的第一部分，然后返回剩下的部分</p>
<p>(CREATE TABLE …) AS (SELECT …)：AS能把SELECT的查询结果填入新表，还能在查询中首次使用原始列名的地方后接AS并设定采用的别名（或者直接后接别名）</p>
<p>FROM (表名) CLOSS JOIN (表名)：把第一张表的每一个值都与第二张表的每个值配成对，可以将CLOSS JOIN换成,号</p>
<p>FROM (表名) INNER JOIN (表名) ON (…=/&lt;&gt;…)：利用条件式里的比较运算符结合两张表</p>
<p>FROM (表名) NATURAL JOIN (表名)：识别出每个表里的相同名称并返回相符的结果</p>
<h2 id="子查询"><strong>子查询</strong></h2>
<p>WHERE EXISTS：存在的判定，反之为NOT EXISTS</p>
<p>注意</p>
<p>子查询都是单一SELECT语句</p>
<p>子查询总是位于括弧里</p>
<p>子查询没有属于自己的分号</p>
<p>子查询可以出现在：SELECT子句、选出COLUMN LIST作为其中一列、FROM子句与HAVING子句中。子查询能与INSERT、DELETE、UPDATE、SELECT一起使用,子查询必须返回一个值。使用IN是例外情况。大部分时候，子查询只需要返回单一值,联接比子查询更有效率</p>
<p>如果子查询可以独立运行且不会引用外层查询的任何结果，即称为非关联子查询，反之则为关联子查询</p>
<h2 id="外联接-自联接与联合"><strong>外联接、自联接与联合</strong></h2>
<p>FROM (表名) LEFT OUTER JOIN (表名)：接收左表的所有行，并用这些行与右表中的行匹配，其中紧跟FROM的左表，如果右表没有相匹配的行则返回NULL，如果有多个相匹配的行则返回多个值，右联接则相反</p>
<p>(…) UNION (…)：将多张表的查询结果联合，并且没有重复记录，每个SELECT语句中列的数量必须一致，列的数据必须相同或者可以相互转换</p>
<p>INTERSEC与EXCRPT：分别取交集和差集</p>
<p>注意</p>
<p>自引用外键：自引用外键是个出于其他目的而用于同一张表的主键</p>
<p>自联接能把单一表当成两张具有完全相同的信息的表来进行查询</p>
<h2 id="约束-视图与事务"><strong>约束、视图与事务</strong></h2>
<p>CREATE VIEW (视图名称) AS (SQL代码)：相当于封装了一段代码，可以让别人只看到这段代码显示的数据</p>
<p>START TRANSACTION、COMMIT、ROLLBACK：事务的三部，开始、提交和回滚</p>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://bri11ake.github.io/post/tong-chi-wu-liang-bai-du-er-san-ju/">
                  <h3 class="post-title">
                    痛斥无良百度二三句
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
